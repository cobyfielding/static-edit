!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).StaticEdit=e()}}(function(){return function e(t,n,i){function o(a,u){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(r)return r(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.createField=function(){return document.createElement("textarea")},t}(e("./editable").Editable);n.Block=o},{"./editable":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){this.elem=e,this.editor=t}return e.prototype.bindEvents=function(){var e=this;this.elem.addEventListener("click",function(t){if(t.stopPropagation(),t.preventDefault(),!e.editor.editionStarted(e.elem,e.elem.innerText))return!1;var n=e.createField();n.value=e.elem.innerText,n.addEventListener("blur",function(){var t=e.elem.innerText,i=n.value;e.elem.innerText=i,e.changed=!0,n.parentNode.replaceChild(e.elem,n),setTimeout(function(){return e.editor.editionEnded(e.elem,t,i)},100)}),n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault()});var i=function(){n.style.height="auto",n.style.height=n.scrollHeight+"px"},o=function(){return window.setTimeout(i,0)};n.addEventListener("change",i),n.addEventListener("cut",o),n.addEventListener("paste",o),n.addEventListener("drop",o),n.addEventListener("keydown",o),n.style.width="auto",n.style.height=e.elem.offsetHeight+"px",n.style.overflowY="hidden",n.style.fontSize=window.getComputedStyle(e.elem).fontSize,e.elem.parentNode.replaceChild(n,e.elem),n.focus(),i()},!0)},Object.defineProperty(e.prototype,"value",{get:function(){return this.elem.textContent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.elem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChanged",{get:function(){return this.changed},enumerable:!0,configurable:!0}),e}();n.Editable=i},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./block"),o=e("./line"),r=e("./image"),a=function(){function e(e){this.options=e,this.selector=".editable",this.handleOptions(),this.elems=[];for(var t=document.querySelectorAll(this.selector),n=0;n<t.length;++n){var a=void 0;(a="P"===t[n].tagName?new i.Block(t[n],this):"IMG"===t[n].tagName?new r.Image(t[n],this):new o.Line(t[n],this)).bindEvents(),this.elems.push(a)}}return e.prototype.handleOptions=function(){!0===this.options.saveButton&&this.createSaveButton(),void 0!==this.options.selector&&(this.selector=this.options.selector)},e.prototype.createSaveButton=function(){var e=this,t=document.createElement("button");t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),window.dispatchEvent(new CustomEvent("static_edit.saving",{detail:{changed:e.elems.filter(function(e){return e.hasChanged})}}))}),t.textContent="Save",t.style.position="absolute",t.style.top="20px",t.style.left="20px",document.body.appendChild(t)},e.prototype.editionStarted=function(e,t){return!this.editing&&(this.editing=!0,window.dispatchEvent(new CustomEvent("static_edit.editing",{detail:{elem:e,oldValue:t}})),!0)},e.prototype.editionEnded=function(e,t,n){this.editing=!1,window.dispatchEvent(new CustomEvent("static_edit.edited",{detail:{elem:e,oldValue:t,newValue:n}}))},e}();n.Editor=a},{"./block":1,"./image":4,"./line":5}],4:[function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.createField=function(){var e=document.createElement("input");return e.type="file",e.style.display="none",e},t.prototype.bindEvents=function(){var e=this;this.elem.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault();var n=e.createField();n.addEventListener("change",function(){var t=n.files[0];if(t.type.match(/image.*/)){var i=new FileReader;i.addEventListener("loadend",function(i){var o=i.target.result,r=e.elem.src;e.elem.src=o,e.elem.dataset.fileName=t.name,e.elem.parentNode.removeChild(n),setTimeout(function(){return e.editor.editionEnded(e.elem,r,o)},100)}),i.readAsDataURL(t)}}),e.elem.parentNode.appendChild(n),n.click()},!0)},t}(e("./editable").Editable);n.Image=o},{"./editable":2}],5:[function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.createField=function(){return document.createElement("input")},t}(e("./editable").Editable);n.Line=o},{"./editable":2}]},{},[3])(3)});